{"version":3,"sources":["images/logo.svg","components/Header.js","images/like-button.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/constants.js","utils/Api.js","components/App.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","cardDeleteButtonClassName","link","name","onClick","type","onCardDelete","likeButton","onCardLike","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","item","onCardClick","Footer","PopupWithForm","isOpen","onClose","aria-label","title","noValidate","onSubmit","children","ImagePopup","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","id","minLength","maxLength","value","onChange","target","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","placeholder","ref","AddPlacePopup","inputName","inputLink","requestParams","baseUrl","headers","authorization","api","this","_baseUrl","_headers","res","ok","json","Promise","reject","Error","status","fetch","method","then","_getResponseData","body","JSON","stringify","avatarUrl","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","closeAllPopups","all","getProfileData","getInitialCards","user","initialCards","catch","err","console","log","Provider","deleteCard","newCards","filter","c","deleteLike","putLike","newCard","data","setProfileData","newData","editAvatar","createCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.839a1ece.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo.svg';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={logo} alt=\"Лого проекта\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/like-button.df0c9655.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\nimport likeButton from '../images/like-button.svg';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `cards__like-button ${isLiked ? 'cards__like-button_active' : ''}`;\r\n\r\n  const cardDeleteButtonClassName = `cards__remove-button ${isOwn ? '' : 'cards__remove-button_hidden'}`;\r\n\r\n\r\n  function handleCardClick() {\r\n    props.onClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card)\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    props.onCardDelete(props.card)\r\n  }\r\n\r\n  return (\r\n    <div className=\"cards__item\">\r\n      <img className=\"cards__image\" src={props.card.link} alt={props.card.name} onClick={handleCardClick} />\r\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleCardDelete} />\r\n      <div className=\"cards__description\">\r\n        <h2 className=\"cards__title\">{props.card.name}</h2>\r\n        <div className=\"cards__like-container\">\r\n          <img src={likeButton} className={cardLikeButtonClassName} alt=\"Лайк\" onClick={handleLikeClick} />\r\n          <span className=\"cards__like-number\">{props.card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n        <section className=\"profile\">\r\n          <div className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\r\n            <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар профиля\" />\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__title\">\r\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n              <button className=\"profile__edit-button\" onClick={props.onEditProfile} type=\"button\" />\r\n            </div>\r\n            <p className=\"profile__profession\">{currentUser.about}</p>\r\n          </div>\r\n          <button className=\"profile__add-button\" onClick={props.onAddPlace} type=\"button\" />\r\n        </section>\r\n\r\n        <section className=\"cards\">\r\n          {props.cards.map(item => <Card key={item._id} card={item}\r\n            onClick={props.onCardClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}/>)}\r\n        </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <div className={`popup ${props.isOpen && 'popup_opened'} popup_type_${props.name}`}>\r\n      <div className=\"popup__container\">\r\n        <button type=\"button\" onClick={props.onClose} className=\"popup__close-button\" aria-label=\"Закрыть\" />\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form className=\"popup__form\" name={props.name} noValidate onSubmit={props.onSubmit} >\r\n          {props.children}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, isOpen, onClose }) {\r\n  return (\r\n    <div className={`popup ${isOpen && 'popup_opened'} popup_type_lightbox`}>\r\n      <div className=\"lightbox\">\r\n          <button\r\n            className=\"popup__close-button\"\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            aria-label=\"Закрыть\"\r\n          />\r\n          <img className=\"lightbox__image\"\r\n            src={card.link} alt={card.name} />\r\n          <h2 className=\"lightbox__image-title\">{card.name}</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n    setName('');\r\n    setDescription('');\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit-profile\"\r\n      title=\"Редактировать профиль\">\r\n      <input type=\"text\" className=\"popup__input popup__input_name-field\" id=\"name\"\r\n        name=\"name\" minLength=\"2\" maxLength=\"40\" value={name}\r\n        onChange={handleNameChange} required />\r\n      <span id='name-error' className='popup__input-error'></span>\r\n      <input type=\"text\" className=\"popup__input popup__input_profession\" id=\"profession\"\r\n        name=\"about\" minLength=\"2\" maxLength=\"200\" value={description}\r\n        onChange={handleDescriptionChange} required />\r\n      <span id='profession-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Сохранить</button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit-avatar\"\r\n      title=\"Обновить аватар\">\r\n      <input type=\"url\" className=\"popup__input popup__input_avatar-link\" id=\"avatar-link\"\r\n        name=\"link\" placeholder=\"Ссылка на аватар\" ref={avatarRef} required />\r\n      <span id='avatar-link-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Сохранить</button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n  const inputName = React.useRef();\r\n  const inputLink = React.useRef();\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    props.onAddPlace({\r\n      name: inputName.current.value,\r\n      link: inputLink.current.value\r\n    });\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"add-new-card\"\r\n      title=\"Новое место\">\r\n      <input type=\"text\" className=\"popup__input popup__input_place-name\" id=\"place-name\"\r\n        name=\"name\" placeholder=\"Название\" minLength=\"2\" maxLength=\"30\" ref={inputName} required />\r\n      <span id='place-name-error' className='popup__input-error'></span>\r\n      <input type=\"url\" className=\"popup__input popup__input_place-link\" id=\"place-link\"\r\n        name=\"link\" placeholder=\"Ссылка на картинку\" ref={inputLink} required />\r\n      <span id='place-link-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Создать</button>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup\r\n","\r\nconst requestParams = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-19',\r\n  headers: {\r\n      authorization: 'd9b0d4bd-9467-4294-aae9-066f4b6515ac',\r\n      'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nexport default requestParams\r\n","import requestParams from './constants.js';\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  // Общий обработчик запросов\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  // Получаем массив существующих карточек\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: this._headers,\r\n      method: 'GET'\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // Получаем основные данные текущего профиля\r\n  getProfileData() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n      method: 'GET'\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // Отправляем обновленную информацию профиля\r\n  setProfileData({ name, about }) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n      method: 'PATCH',\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about\r\n      })\r\n      })\r\n      .then(this._getResponseData)\r\n  }\r\n\r\n  // Создание и удаление карточки\r\n  createCard({ name, link }) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ name: name, link: link })\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  // Установка и снятие лайка для карточки\r\n  putLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n\r\n  }\r\n\r\n  deleteLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  // Обновление аватара\r\n  editAvatar(avatarUrl) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(avatarUrl)\r\n    }).then(this._getResponseData)\r\n  }\r\n}\r\n\r\nconst api = new Api(requestParams);\r\nexport default api\r\n","import React from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport api from '../utils/Api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState({\r\n    link: '',\r\n    name: ''\r\n  });\r\n  const [currentUser, setCurrentUser] = React.useState({\r\n    name: '',\r\n    about: '',\r\n    avatar: ''\r\n  });\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getProfileData(), api.getInitialCards()])\r\n      .then(([user, initialCards]) => {\r\n          setCurrentUser(user);\r\n          setCards([...initialCards]);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, [])\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  const handleCardClick = ({ name, link }) => {\r\n    setSelectedCard({ name, link });\r\n    setIsImagePopupOpen(true);\r\n  };\r\n\r\n  function handleUpdateAvatar(data){\r\n    api.editAvatar(data)\r\n      .then((newData) => {\r\n        setCurrentUser(newData);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleUpdateUser(data) {\r\n    api.setProfileData(data)\r\n      .then((newData) => {\r\n        setCurrentUser(newData);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleUpdateCards(data) {\r\n    api.createCard(data)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    (!isLiked ? api.putLike(card._id) : api.deleteLike(card._id))\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== card._id);\r\n        setCards(newCards);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n\r\n        <Header />\r\n\r\n        <Main\r\n          cards={cards}\r\n          onEditProfile={handleEditProfileClick}\r\n          onAddPlace={handleAddPlaceClick}\r\n          onEditAvatar={handleEditAvatarClick}\r\n          onCardClick={handleCardClick}\r\n          onCardDelete={handleCardDelete}\r\n          onCardLike={handleCardLike}\r\n        />\r\n\r\n        <Footer />\r\n\r\n      </div>\r\n\r\n      <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\r\n\r\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\r\n\r\n      <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleUpdateCards}/>\r\n\r\n      <PopupWithForm\r\n        name=\"delete-card\"\r\n        title=\"Вы уверены\">\r\n        <button type=\"submit\" className=\"popup__submit popup__submit-confirm\">Да</button>\r\n      </PopupWithForm>\r\n\r\n      <ImagePopup\r\n        isOpen={isImagePopupOpen}\r\n        onClose={closeAllPopups}\r\n        card={selectedCard}\r\n      />\r\n\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}